!function(a){document.addEventListener("DOMContentLoaded",function(){a.initialize=function(){if(a.data){clearInterval(a.dataLoadInterval);var b={r:20,chromeRadiusMod:a.data.length},c=new a.Renderer(document.getElementById("pClock"),b),d=new a.PClock(a.data);d.setRenderer(c)}},a.data?a.initialize():a.dataLoadInterval=setInterval(a.initApp,200)})}(window.pClock=window.pClock||{}),function(a){a.PClock=function(b,c){this.options=a.util.merge(this.options,c),this.species={},this.setData(b),this.buildSpecies()},a.PClock.prototype.setRenderer=function(a){this.renderer=a,this.renderAllSpecies()},a.PClock.prototype.renderAllSpecies=function(){for(var b=0;b<this.data.length;b++){var c=a.util.slugify(this.data[b].name);this.renderer.renderSpecies(this.species[c],b)}},a.PClock.prototype.constructor=a.PClock,a.PClock.prototype.setData=function(a){this.data=a},a.PClock.prototype.buildSpecies=function(){for(var b=0;b<this.data.length;b++){var c=a.util.slugify(this.data[b].name),d=new a.Species(this.data[b],this,this.renderer);this.species[c]=d}}}(window.pClock=window.pClock||{}),function(a){a.Renderer=function(b,c){this.options=a.util.merge(this.options,c),this.element=b,this.paper=new Raphael(this.element,this.options.w,this.options.h),this.defineCustomRaphaelAttributes(),this.renderChrome()},a.Renderer.prototype.options={defaultColor:"#ff0000",chromeColor:"#99a",strokeWidth:10,chromeRadiusMod:15,w:window.innerWidth,h:window.innerHeight,r:15,center:{x:.5*window.innerWidth,y:.5*window.innerHeight}},a.Renderer.prototype.constructor=a.Renderer,a.Renderer.prototype.defineCustomRaphaelAttributes=function(){var a=this,b=this.paper.customAttributes.arc=function(b,c,d,e,f){return{path:a.describeArc(b,c,d,a.dateToDegree(e),a.dateToDegree(f))}};return b},a.Renderer.prototype.renderSpecies=function(b,c){var d,e,f,g;d=b.getEvents(),e=this.options.r,f=this.options.center,g=a.util.slugify(b.name);for(var h in d){var i=this.paper.path().attr({stroke:"#"+b.color,"stroke-width":this.options.strokeWidth}).attr({arc:[f.x,f.y,e*c,d[h].start,d[h].end]});i.node.setAttribute("class",g),b.instantiateEventHandlers(i)}},a.Renderer.prototype.renderChrome=function(){var a,b,c,d;a=this.options.r,b=this.options.center,c=this.options.chromeColor,d=this.options.chromeRadiusMod,this.paper.circle(b.x,b.y,5).attr({fill:c,"stroke-width":0}),this.paper.circle(b.x,b.y,a*d).attr({stroke:c,"stroke-width":1}),this.paper.path().attr({stroke:c,"stroke-width":10}).attr({arc:[this.options.center.x,this.options.center.y,a*d,"1/1/2014",Date()]});for(var e=[],f=1;13>f;)e[f]=this.paper.path().attr({stroke:"#ccc","stroke-width":5}).attr({arc:[b.x,b.y,a*d,f+"/1/2014",f+"/2/2014"]}),e[f].node.setAttribute("class","month-"+f),f++},a.Renderer.prototype.describeArc=function(a,b,c,d,e){var f,g,h,i;return f=this.polarToCartesian(a,b,c,e),g=this.polarToCartesian(a,b,c,d),h=180>=e-d?"0":"1",i=[["M",f.x,f.y],["A",c,c,0,h,0,g.x,g.y]]},a.Renderer.prototype.dateToDegree=function(a){var b=new Date(a),c=new Date(b.getFullYear(),0,1),d=Math.ceil((b-c)/864e5),e=d/365;return 360*e},a.Renderer.prototype.polarToCartesian=function(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}}}(window.pClock=window.pClock||{}),function(a){a.Species=function(a,b){this.marshal=b,this.data=a,this.id=a.id,this.categories=a.categories,this.name=a.name,this.commonName=a.commonName,this.description=a.description,this.color=a.color,this.events=a.events},a.Species.prototype.constructor=a.Species,a.Species.prototype.getData=function(){return{name:this.name,commonName:this.commonName,description:this.description,color:this.color}},a.Species.prototype.getEvents=function(){return this.events},a.Species.prototype.instantiateEventHandlers=function(a){this.assignSpeciesEventMouseOver(a),this.assignSpeciesEventClick(a)},a.Species.prototype.assignSpeciesEventMouseOver=function(a){var b=this.getData();a.mouseover(function(a){console.log("mouseover",b.name,a)})},a.Species.prototype.assignSpeciesEventClick=function(a){var b=this.getData();a.click(function(a){console.log("clicked",b.name,a)})}}(window.pClock=window.pClock||{}),function(a){a.util={merge:function(a,b){for(var c in b)a[c]=b[c];return a},slugify:function(a){var b=a;return b=b.toLowerCase(),b=b.replace(/[^a-z0-9]+/g,"-"),b=b.replace(/^-|-$/g,"")}}}(window.pClock=window.pClock||{}),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();